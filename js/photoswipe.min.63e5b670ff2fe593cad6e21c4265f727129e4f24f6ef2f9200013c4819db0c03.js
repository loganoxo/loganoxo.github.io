/*! PhotoSwipe - v4.1.3 - 2019-01-08
* http://photoswipe.com
* Copyright (c) 2019 Dmitry Semenov; */(function(e,t){typeof define=="function"&&define.amd?define(t):typeof exports=="object"?module.exports=t():e.PhotoSwipe=t()})(this,function(){"use strict";var e=function(e,t,n,s){i={features:null,bind:function(e,t,n,s){var o,i=(s?"remove":"add")+"EventListener";t=t.split(" ");for(o=0;o<t.length;o++)t[o]&&e[i](t[o],n,!1)},isArray:function(e){return e instanceof Array},createEl:function(e,t){var n=document.createElement(t||"div");return e&&(n.className=e),n},getScrollY:function(){var e=window.pageYOffset;return e!==void 0?e:document.documentElement.scrollTop},unbind:function(e,t,n){i.bind(e,t,n,!0)},removeClass:function(e,t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(e,t){i.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)},hasClass:function(e,t){return e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},getChildByClass:function(e,t){for(var n=e.firstChild;n;){if(i.hasClass(n,t))return n;n=n.nextSibling}},arraySearch:function(e,t,n){for(var s=e.length;s--;)if(e[s][n]===t)return s;return-1},extend:function(e,t,n){for(var s in t)if(t.hasOwnProperty(s)){if(n&&e.hasOwnProperty(s))continue;e[s]=t[s]}},easing:{sine:{out:function(e){return Math.sin(e*(Math.PI/2))},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},cubic:{out:function(e){return--e*e*e+1}}},detectFeatures:function(){if(i.features)return i.features;var n,s,o,a,r,c,l,d,u,h,m,f=i.createEl(),p=f.style,t="",e={};e.oldIE=document.all&&!document.addEventListener,e.touch="ontouchstart"in window,window.requestAnimationFrame&&(e.raf=window.requestAnimationFrame,e.caf=window.cancelAnimationFrame),e.pointerEvent=!!window.PointerEvent||navigator.msPointerEnabled,e.pointerEvent||(d=navigator.userAgent,/iP(hone|od)/.test(navigator.platform)&&(n=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n&&n.length>0&&(n=parseInt(n[1],10),n>=1&&n<8&&(e.isOldIOSPhone=!0))),c=d.match(/Android\s([0-9.]*)/),s=c?c[1]:0,s=parseFloat(s),s>=1&&(s<4.4&&(e.isOldAndroid=!0),e.androidVersion=s),e.isMobileOpera=/opera mini|opera mobi/i.test(d));for(h=["transform","perspective","animationName"],m=["","webkit","Moz","ms","O"],r=0;r<4;r++){t=m[r];for(a=0;a<3;a++)o=h[a],l=t+(t?o.charAt(0).toUpperCase()+o.slice(1):o),!e[o]&&l in p&&(e[o]=l);t&&!e.raf&&(t=t.toLowerCase(),e.raf=window[t+"RequestAnimationFrame"],e.raf&&(e.caf=window[t+"CancelAnimationFrame"]||window[t+"CancelRequestAnimationFrame"]))}return e.raf||(u=0,e.raf=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-u)),s=window.setTimeout(function(){e(t+n)},n);return u=t+n,s},e.caf=function(e){clearTimeout(e)}),e.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,i.features=e,e}},i.detectFeatures(),i.features.oldIE&&(i.bind=function(e,t,n,s){t=t.split(" ");for(var o,a=(s?"detach":"attach")+"Event",r=function(){n.handleEvent.call(n)},i=0;i<t.length;i++)if(o=t[i],o)if(typeof n=="object"&&n.handleEvent){if(s){if(!n["oldIE"+o])return!1}else n["oldIE"+o]=r;e[a]("on"+o,n["oldIE"+o])}else e[a]("on"+o,n)}),o=this,dt=25,L=3,a={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(e){return e.tagName==="A"},getDoubleTapZoom:function(e,t){return e?1:t.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"},i.extend(a,s);var o,i,a,c,l,u,h,f,b,y,E,S,F,D,N,L,R,P,B,$,Y,Q,Z,W=function(){return{x:0,y:0}},ge,Kt,_t,nn,K=W(),je=W(),r=W(),Ee,Ye,v={},oe,st,St,Mt,Ue,X=0,de={},C=W(),Zt,M=0,$e,He,Le,De,be,qe=!0,mt=[],Je,ut,$t,Nt,at,se,ye={},ae=!1,it,Ne=function(e,t){i.extend(o,t.publicMethods),mt.push(e)},nt=function(e){var t=k();return e>t-1?e-t:e<0?t+e:e},we={},m=function(e,t){return we[e]||(we[e]=[]),we[e].push(t)},d=function(e){var t,s,n=we[e];if(n){s=Array.prototype.slice.call(arguments),s.shift();for(t=0;t<n.length;t++)n[t].apply(o,s)}},z=function(){return(new Date).getTime()},I=function(e){Be=e,o.bg.style.opacity=e*a.bgOpacity},Wt=function(e,t,n,s,i){(!ae||i&&i!==o.currItem)&&(s=s/(i?i.fitRatio:o.currItem.fitRatio)),e[be]=st+t+"px, "+n+"px"+St+" scale("+s+")"},g=function(e){D&&(e&&(u>o.currItem.fitRatio?ae||(ie(o.currItem,!1,!0),ae=!0):ae&&(ie(o.currItem),ae=!1)),Wt(D,r.x,r.y,u))},Ae=function(e){e.container&&Wt(e.container.style,e.initialPosition.x,e.initialPosition.y,e.initialZoomLevel,e)},me=function(e,t){t[be]=st+e+"px, 0px"+St},We=function(e,t){if(!a.loop&&t){var s=l+(C.x*X-e)/C.x,n=Math.round(e-H.x);(s<0&&n>0||s>=k()-1&&n<0)&&(e=H.x+n*a.mainScrollEndFriction)}H.x=e,me(e,nn)},gt=function(e,t){var n=ke[e]-de[e];return je[e]+K[e]+n-n*(t/oe)},_=function(e,t){e.x=t.x,e.y=t.y,t.id&&(e.id=t.id)},Ut=function(e){e.x=Math.round(e.x),e.y=Math.round(e.y)},jt=null,yt=function(){jt&&(i.unbind(document,"mousemove",yt),i.addClass(e,"pswp--has_mouse"),a.mouseUsed=!0,d("mouseUsed")),jt=setTimeout(function(){jt=null},100)},Cn=function(){i.bind(document,"keydown",o),h.transform&&i.bind(o.scrollWrap,"click",o),a.mouseUsed||i.bind(document,"mousemove",yt),i.bind(window,"resize scroll orientationchange",o),d("bindEvents")},Dn=function(){i.unbind(window,"resize scroll orientationchange",o),i.unbind(window,"scroll",b.scroll),i.unbind(document,"keydown",o),i.unbind(document,"mousemove",yt),h.transform&&i.unbind(o.scrollWrap,"click",o),F&&i.unbind(window,Ee,o),clearTimeout(it),d("unbindEvents")},Et=function(e,t){var n=Me(o.currItem,v,e);return t&&(c=n),n},dn=function(e){return e||(e=o.currItem),e.initialZoomLevel},on=function(e){return e||(e=o.currItem),e.w>0?a.maxSpreadZoom:1},Dt=function(e,t,n,s){return s===o.currItem.initialZoomLevel?(n[e]=o.currItem.initialPosition[e],!0):(n[e]=gt(e,s),n[e]>t.min[e]?(n[e]=t.min[e],!0):n[e]<t.max[e]&&(n[e]=t.max[e],!0))},wn=function(){if(be){var t=h.perspective&&!R;st="translate"+(t?"3d(":"("),St=h.perspective?", 0px)":")";return}be="left",i.addClass(e,"pswp--ie"),me=function(e,t){t.left=e+"px"},Ae=function(e){var n=e.fitRatio>1?1:e.fitRatio,t=e.container.style,s=n*e.w,o=n*e.h;t.width=s+"px",t.height=o+"px",t.left=e.initialPosition.x+"px",t.top=e.initialPosition.y+"px"},g=function(){if(D){var e=D,t=o.currItem,n=t.fitRatio>1?1:t.fitRatio,s=n*t.w,i=n*t.h;e.width=s+"px",e.height=i+"px",e.left=r.x+"px",e.top=r.y+"px"}}},vn=function(e){var t="";a.escKey&&e.keyCode===27?t="close":a.arrowKeys&&(e.keyCode===37?t="prev":e.keyCode===39&&(t="next")),t&&!e.ctrlKey&&!e.altKey&&!e.shiftKey&&!e.metaKey&&(e.preventDefault?e.preventDefault():e.returnValue=!1,o[t]())},gn=function(e){if(!e)return;(ce||te||y||Ce)&&(e.preventDefault(),e.stopPropagation())},an=function(){o.setScrollOffset(0,i.getScrollY())},x={},le=0,Se=function(e){x[e]&&(x[e].raf&&ut(x[e].raf),le--,delete x[e])},kt=function(e){x[e]&&Se(e),x[e]||(le++,x[e]={})},Fe=function(){for(var e in x)x.hasOwnProperty(e)&&Se(e)},Te=function(e,t,n,s,o,i,a){var r,c,l=z();kt(e),c=function(){if(x[e]){if(r=z()-l,r>=s){Se(e),i(n),a&&a();return}i((n-t)*o(r/s)+t),x[e].raf=Je(c)}},c()},yn={shout:d,listen:m,viewportSize:v,options:a,isMainScrollAnimating:function(){return y},getZoomLevel:function(){return u},getCurrentIndex:function(){return l},isDragging:function(){return F},isZooming:function(){return P},setScrollOffset:function(e,t){de.x=e,se=de.y=t,d("updateScrollOffset",de)},applyZoomPan:function(e,t,n,s){r.x=t,r.y=n,u=e,g(s)},init:function(){if(ge||Kt)return;o.framework=i,o.template=e,o.bg=i.getChildByClass(e,"pswp__bg"),$t=e.className,ge=!0,h=i.detectFeatures(),Je=h.raf,ut=h.caf,be=h.transform,at=h.oldIE,o.scrollWrap=i.getChildByClass(e,"pswp__scroll-wrap"),o.container=i.getChildByClass(o.scrollWrap,"pswp__container"),nn=o.container.style,o.itemHolders=f=[{el:o.container.children[0],wrap:0,index:-1},{el:o.container.children[1],wrap:0,index:-1},{el:o.container.children[2],wrap:0,index:-1}],f[0].el.style.display=f[2].el.style.display="none",wn(),b={resize:o.updateSize,orientationchange:function(){clearTimeout(it),it=setTimeout(function(){v.x!==o.scrollWrap.clientWidth&&o.updateSize()},500)},scroll:an,keydown:vn,click:gn};var n,s,r,c=h.isOldIOSPhone||h.isOldAndroid||h.isMobileOpera;(!h.animationName||!h.transform||c)&&(a.showAnimationDuration=a.hideAnimationDuration=0);for(n=0;n<mt.length;n++)o["init"+mt[n]]();t&&(r=o.ui=new t(o,i),r.init()),d("firstUpdate"),l=l||a.index||0,(isNaN(l)||l<0||l>=k())&&(l=0),o.currItem=G(l),(h.isOldIOSPhone||h.isOldAndroid)&&(qe=!1),e.setAttribute("aria-hidden","false"),a.modal&&(qe?e.style.position="fixed":(e.style.position="absolute",e.style.top=i.getScrollY()+"px")),se===void 0&&(d("initialLayout"),se=Nt=i.getScrollY()),s="pswp--open ",a.mainClass&&(s+=a.mainClass+" "),a.showHideOpacity&&(s+="pswp--animate_opacity "),s+=R?"pswp--touch":"pswp--notouch",s+=h.animationName?" pswp--css_animation":"",s+=h.svg?" pswp--svg":"",i.addClass(e,s),o.updateSize(),N=-1,M=null;for(n=0;n<L;n++)me((n+N)*C.x,f[n].el.style);at||i.bind(o.scrollWrap,Ye,o),m("initialZoomInEnd",function(){o.setContent(f[0],l-1),o.setContent(f[2],l+1),f[0].el.style.display=f[2].el.style.display="block",a.focus&&e.focus(),Cn()}),o.setContent(f[1],l),o.updateCurrItem(),d("afterInit"),qe||(Mt=setInterval(function(){!le&&!F&&!P&&u===o.currItem.initialZoomLevel&&o.updateSize()},1e3)),i.addClass(e,"pswp--visible")},close:function(){if(!ge)return;ge=!1,Kt=!0,d("close"),Dn(),Xt(o.currItem,null,!0,o.destroy)},destroy:function(){d("destroy"),Z&&clearTimeout(Z),e.setAttribute("aria-hidden","true"),e.className=$t,Mt&&clearInterval(Mt),i.unbind(o.scrollWrap,Ye,o),i.unbind(window,"scroll",o),xt(),Fe(),we=null},panTo:function(e,t,n){n||(e>c.min.x?e=c.min.x:e<c.max.x&&(e=c.max.x),t>c.min.y?t=c.min.y:t<c.max.y&&(t=c.max.y)),r.x=e,r.y=t,g()},handleEvent:function(e){e=e||window.event,b[e.type]&&b[e.type](e)},goTo:function(e){e=nt(e);var t=e-l;M=t,l=e,o.currItem=G(l),X-=t,We(C.x*X),Fe(),y=!1,o.updateCurrItem()},next:function(){o.goTo(l+1)},prev:function(){o.goTo(l-1)},updateCurrZoomItem:function(e){if(e&&d("beforeChange",0),f[1].el.children.length){var t=f[1].el.children[0];i.hasClass(t,"pswp__zoom-wrap")?D=t.style:D=null}else D=null;c=o.currItem.bounds,oe=u=o.currItem.initialZoomLevel,r.x=c.center.x,r.y=c.center.y,e&&d("afterChange")},invalidateCurrItems:function(){Ue=!0;for(var e=0;e<L;e++)f[e].item&&(f[e].item.needsUpdate=!0)},updateCurrItem:function(e){if(M===0)return;var t,s,i,n=Math.abs(M);if(e&&n<2)return;o.currItem=G(l),ae=!1,d("beforeChange",M),n>=L&&(N+=M+(M>0?-L:L),n=L);for(s=0;s<n;s++)M>0?(t=f.shift(),f[L-1]=t,N++,me((N+2)*C.x,t.el.style),o.setContent(t,l-n+s+1+1)):(t=f.pop(),f.unshift(t),N--,me(N*C.x,t.el.style),o.setContent(t,l+n-s-1-1));D&&Math.abs(M)===1&&(i=G(Zt),i.initialZoomLevel!==u&&(Me(i,v),ie(i),Ae(i))),M=0,o.updateCurrZoomItem(),Zt=l,d("afterChange")},updateSize:function(t){if(!qe&&a.modal){var n,s,h,m,p=i.getScrollY();if(se!==p&&(e.style.top=p+"px",se=p),!t&&ye.x===window.innerWidth&&ye.y===window.innerHeight)return;ye.x=window.innerWidth,ye.y=window.innerHeight,e.style.height=ye.y+"px"}if(v.x=o.scrollWrap.clientWidth,v.y=o.scrollWrap.clientHeight,an(),C.x=v.x+Math.round(v.x*a.spacing),C.y=v.y,We(C.x*X),d("beforeResize"),N!==void 0){for(h=0;h<L;h++)m=f[h],me((h+N)*C.x,m.el.style),s=l+h-1,a.loop&&k()>2&&(s=nt(s)),n=G(s),n&&(Ue||n.needsUpdate||!n.bounds)?(o.cleanSlide(n),o.setContent(m,s),h===1&&(o.currItem=n,o.updateCurrZoomItem(!0)),n.needsUpdate=!1):m.index===-1&&s>=0&&o.setContent(m,s),n&&n.container&&(Me(n,v),ie(n),Ae(n));Ue=!1}oe=u=o.currItem.initialZoomLevel,c=o.currItem.bounds,c&&(r.x=c.center.x,r.y=c.center.y,g(!0)),d("resize")},zoomTo:function(e,t,n,s,o){t&&(oe=u,ke.x=Math.abs(t.x)-r.x,ke.y=Math.abs(t.y)-r.y,_(je,r));var c,l,d,h=Et(e,!1),a={};Dt("x",h,a,e),Dt("y",h,a,e),l=u,c={x:r.x,y:r.y},Ut(a),d=function(t){t===1?(u=e,r.x=a.x,r.y=a.y):(u=(e-l)*t+l,r.x=(a.x-c.x)*t+c.x,r.y=(a.y-c.y)*t+c.y),o&&o(t),g(t===1)},n?Te("customZoomTo",0,1,n,s||i.easing.sine.inOut,d):d(1)}},Qt=30,Tt=10,dt,Rt,Re,O={},ne={},j={},w={},fe={},V=[],re={},ze,ee=[],ue={},ft,Ce,xe,Qe=0,Ze=W(),ht=0,Ct,te,ce,tt,Bt,Vt,H=W(),ke=W(),he=W(),vt,Ve,Be,Ie,En=function(e,t){return e.x===t.x&&e.y===t.y},xn=function(e,t){return Math.abs(e.x-t.x)<dt&&Math.abs(e.y-t.y)<dt},Jt=function(e,t){return ue.x=Math.abs(e.x-t.x),ue.y=Math.abs(e.y-t.y),Math.sqrt(ue.x*ue.x+ue.y*ue.y)},xt=function(){tt&&(ut(tt),tt=null)},cn=function(){F&&(tt=Je(cn),Fn())},mn=function(){return a.scaleMode!=="fit"||u!==o.currItem.initialZoomLevel},ln=function(e,t){return!!e&&e!==document&&!(e.getAttribute("class")&&e.getAttribute("class").indexOf("pswp__scroll-wrap")>-1)&&(t(e)?e:ln(e.parentNode,t))},At={},sn=function(e,t){return At.prevent=!ln(e.target,a.isClickableElement),d("preventDragEvent",e,t,At),At.prevent},tn=function(e,t){return t.x=e.pageX,t.y=e.pageY,t.id=e.identifier,t},en=function(e,t,n){n.x=(e.x+t.x)*.5,n.y=(e.y+t.y)*.5},_n=function(e,t,n){if(e-Re>50){var s=ee.length>2?ee.shift():{};s.x=t,s.y=n,ee.push(s),Re=e}},Pt=function(){var e=r.y-o.currItem.initialPosition.y;return 1-Math.abs(e/(v.y/2))},_e={},Nn={},U=[],Pe,ot=function(e){for(;U.length>0;)U.pop();return $?(Pe=0,V.forEach(function(e){Pe===0?U[0]=e:Pe===1&&(U[1]=e),Pe++})):e.type.indexOf("touch")>-1?e.touches&&e.touches.length>0&&(U[0]=tn(e.touches[0],_e),e.touches.length>1&&(U[1]=tn(e.touches[1],Nn))):(_e.x=e.pageX,_e.y=e.pageY,_e.id="",U[0]=_e),U},Ht=function(e,t){var s,i,d,m,f=0,n=r[e]+t[e],p=t[e]>0,l=H.x+t.x,h=H.x-re.x;if(n>c.min[e]||n<c.max[e]?i=a.panEndFriction:i=1,n=r[e]+t[e]*i,(a.allowPanToNext||u===o.currItem.initialZoomLevel)&&(D?B==="h"&&e==="x"&&!te&&(p?(n>c.min[e]&&(i=a.panEndFriction,f=c.min[e]-n,d=c.min[e]-je[e]),(d<=0||h<0)&&k()>1?(s=l,h<0&&l>re.x&&(s=re.x)):c.min.x!==c.max.x&&(m=n)):(n<c.max[e]&&(i=a.panEndFriction,f=n-c.max[e],d=je[e]-c.max[e]),(d<=0||h>0)&&k()>1?(s=l,h>0&&l<re.x&&(s=re.x)):c.min.x!==c.max.x&&(m=n))):s=l,e==="x"))return s!==void 0&&(We(s,!0),s===re.x?Q=!1:Q=!0),c.min.x!==c.max.x&&(m!==void 0?r.x=m:Q||(r.x+=t.x*i)),s!==void 0;y||Q||u>o.currItem.fitRatio&&(r[e]+=t[e]*i)},zn=function(e){if(e.type==="mousedown"&&e.button>0)return;if(ve){e.preventDefault();return}if(xe&&e.type==="mousedown")return;sn(e,!0)&&e.preventDefault(),d("pointerDown"),$&&(n=i.arraySearch(V,e.pointerId,"id"),n<0&&(n=V.length),V[n]={x:e.pageX,y:e.pageY,id:e.pointerId});var n,t=ot(e),s=t.length;S=null,Fe(),(!F||s===1)&&(F=vt=!0,i.bind(window,Ee,o),ft=Ie=Ve=Ce=Q=ce=Ct=te=!1,B=null,d("firstTouchStart",t),_(je,r),K.x=K.y=0,_(w,t[0]),_(fe,w),re.x=C.x*X,ee=[{x:w.x,y:w.y}],Re=Rt=z(),Et(u,!0),xt(),cn()),!P&&s>1&&!y&&!Q&&(oe=u,te=!1,P=Ct=!0,K.y=K.x=0,_(je,r),_(O,t[0]),_(ne,t[1]),en(O,ne,he),ke.x=Math.abs(he.x)-r.x,ke.y=Math.abs(he.y)-r.y,Bt=Vt=Jt(O,ne))},Tn=function(e){if(e.preventDefault(),$){var t,n,s,o=i.arraySearch(V,e.pointerId,"id");o>-1&&(n=V[o],n.x=e.pageX,n.y=e.pageY)}F&&(t=ot(e),!B&&!ce&&!P?H.x!==C.x*X?B="h":(s=Math.abs(t[0].x-w.x)-Math.abs(t[0].y-w.y),Math.abs(s)>=Tt&&(B=s>0?"h":"v",S=t)):S=t)},Fn=function(){if(!S)return;if(s=S.length,s===0)return;if(_(O,S[0]),j.x=O.x-w.x,j.y=O.y-w.y,P&&s>1){if(w.x=O.x,w.y=O.y,!j.x&&!j.y&&En(S[1],ne))return;_(ne,S[1]),te||(te=!0,d("zoomGestureStarted")),i=Jt(O,ne),e=hn(i),e>o.currItem.initialZoomLevel+o.currItem.initialZoomLevel/15&&(Ie=!0);var e,s,i,h,m,f,p,t=1,n=dn(),l=on();e<n?a.pinchToClose&&!Ie&&oe<=o.currItem.initialZoomLevel?(f=n-e,h=1-f/(n/1.2),I(h),d("onPinchClose",h),Ve=!0):(t=(n-e)/n,t>1&&(t=1),e=n-t*(n/3)):e>l&&(t=(e-l)/(n*6),t>1&&(t=1),e=l+t*n),t<0&&(t=0),Bt=i,en(O,ne,Ze),K.x+=Ze.x-he.x,K.y+=Ze.y-he.y,_(he,Ze),r.x=gt("x",e),r.y=gt("y",e),ft=e>u,u=e,g()}else{if(!B)return;if(vt&&(vt=!1,Math.abs(j.x)>=Tt&&(j.x-=S[0].x-fe.x),Math.abs(j.y)>=Tt&&(j.y-=S[0].y-fe.y)),w.x=O.x,w.y=O.y,j.x===0&&j.y===0)return;if(B==="v"&&a.closeOnVerticalDrag&&!mn()){K.y+=j.y,r.y+=j.y,m=Pt(),Ce=!0,d("onVerticalDrag",m),I(m),g();return}_n(z(),O.x,O.y),ce=!0,c=o.currItem.bounds,p=Ht("x",j),p||(Ht("y",j),Ut(r),g())}},Mn=function(e){if(h.isOldAndroid){if(xe&&e.type==="mouseup")return;e.type.indexOf("touch")>-1&&(clearTimeout(xe),xe=setTimeout(function(){xe=0},600))}d("pointerUp"),sn(e,!1)&&e.preventDefault(),$&&(l=i.arraySearch(V,e.pointerId,"id"),l>-1&&(t=V.splice(l,1)[0],navigator.msPointerEnabled?(p={4:"mouse",2:"touch",3:"pen"},t.type=p[e.pointerType],t.type||(t.type=e.pointerType||"mouse")):t.type=e.pointerType||"mouse"));var t,s,c,l,m,f,p,b,j,v=ot(e),n=v.length;if(e.type==="mouseup"&&(n=0),n===2)return S=null,!0;if(n===1&&_(fe,v[0]),n===0&&!B&&!y&&(t||(e.type==="mouseup"?t={x:e.pageX,y:e.pageY,type:"mouse"}:e.changedTouches&&e.changedTouches[0]&&(t={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,type:"touch"})),d("touchRelease",e,t)),c=-1,n===0&&(F=!1,i.unbind(window,Ee,o),xt(),P?c=0:ht!==-1&&(c=z()-ht)),ht=n===1?z():-1,c!==-1&&c<150?s="zoom":s="swipe",P&&n<2&&(P=!1,n===1&&(s="zoomPointerUp"),d("zoomGestureEnded")),S=null,!ce&&!te&&!y&&!Ce)return;if(Fe(),ze||(ze=Sn()),ze.calculateSwipeSpeed("x"),Ce){b=Pt(),b<a.verticalDragRange?o.close():(m=r.y,f=Be,Te("verticalDrag",0,1,300,i.easing.cubic.out,function(e){r.y=(o.currItem.initialPosition.y-m)*e+m,I((1-f)*e+f),g()}),d("onVerticalDrag",1));return}if((Q||y)&&n===0){if(j=kn(s,ze),j)return;s="zoomPointerUp"}if(y)return;if(s!=="swipe"){On();return}!Q&&u>o.currItem.fitRatio&&An(ze)},Sn=function(){var t,n,e={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(s){ee.length>1?(t=z()-Re+50,n=ee[ee.length-2][s]):(t=z()-Rt,n=fe[s]),e.lastFlickOffset[s]=w[s]-n,e.lastFlickDist[s]=Math.abs(e.lastFlickOffset[s]),e.lastFlickDist[s]>20?e.lastFlickSpeed[s]=e.lastFlickOffset[s]/t:e.lastFlickSpeed[s]=0,Math.abs(e.lastFlickSpeed[s])<.1&&(e.lastFlickSpeed[s]=0),e.slowDownRatio[s]=.95,e.slowDownRatioReverse[s]=1-e.slowDownRatio[s],e.speedDecelerationRatio[s]=1},calculateOverBoundsAnimOffset:function(t,n){e.backAnimStarted[t]||(r[t]>c.min[t]?e.backAnimDestination[t]=c.min[t]:r[t]<c.max[t]&&(e.backAnimDestination[t]=c.max[t]),e.backAnimDestination[t]!==void 0&&(e.slowDownRatio[t]=.7,e.slowDownRatioReverse[t]=1-e.slowDownRatio[t],e.speedDecelerationRatioAbs[t]<.05&&(e.lastFlickSpeed[t]=0,e.backAnimStarted[t]=!0,Te("bounceZoomPan"+t,r[t],e.backAnimDestination[t],n||300,i.easing.sine.out,function(e){r[t]=e,g()}))))},calculateAnimOffset:function(t){e.backAnimStarted[t]||(e.speedDecelerationRatio[t]=e.speedDecelerationRatio[t]*(e.slowDownRatio[t]+e.slowDownRatioReverse[t]-e.slowDownRatioReverse[t]*e.timeDiff/10),e.speedDecelerationRatioAbs[t]=Math.abs(e.lastFlickSpeed[t]*e.speedDecelerationRatio[t]),e.distanceOffset[t]=e.lastFlickSpeed[t]*e.speedDecelerationRatio[t]*e.timeDiff,r[t]+=e.distanceOffset[t])},panAnimLoop:function(){if(x.zoomPan&&(x.zoomPan.raf=Je(e.panAnimLoop),e.now=z(),e.timeDiff=e.now-e.lastNow,e.lastNow=e.now,e.calculateAnimOffset("x"),e.calculateAnimOffset("y"),g(),e.calculateOverBoundsAnimOffset("x"),e.calculateOverBoundsAnimOffset("y"),e.speedDecelerationRatioAbs.x<.05&&e.speedDecelerationRatioAbs.y<.05)){r.x=Math.round(r.x),r.y=Math.round(r.y),g(),Se("zoomPan");return}}};return e},An=function(e){if(e.calculateSwipeSpeed("y"),c=o.currItem.bounds,e.backAnimDestination={},e.backAnimStarted={},Math.abs(e.lastFlickSpeed.x)<=.05&&Math.abs(e.lastFlickSpeed.y)<=.05)return e.speedDecelerationRatioAbs.x=e.speedDecelerationRatioAbs.y=0,e.calculateOverBoundsAnimOffset("x"),e.calculateOverBoundsAnimOffset("y"),!0;kt("zoomPan"),e.lastNow=z(),e.panAnimLoop()},kn=function(e,t){if(y||(Qe=l),e==="swipe"){var n,s,r,c,u,f,h=w.x-fe.x,m=t.lastFlickDist.x<10;h>Qt&&(m||t.lastFlickOffset.x>20)?r=-1:h<-Qt&&(m||t.lastFlickOffset.x<-20)&&(r=1)}return r&&(l+=r,l<0?(l=a.loop?k()-1:0,u=!0):l>=k()&&(l=a.loop?0:k()-1,u=!0),(!u||a.loop)&&(M+=r,X-=r,s=!0)),c=C.x*X,f=Math.abs(c-H.x),!s&&c>H.x!==t.lastFlickSpeed.x>0?n=333:(n=Math.abs(t.lastFlickSpeed.x)>0?f/Math.abs(t.lastFlickSpeed.x):333,n=Math.min(n,400),n=Math.max(n,250)),Qe===l&&(s=!1),y=!0,d("mainScrollAnimStart"),Te("mainScroll",H.x,c,n,i.easing.cubic.out,We,function(){Fe(),y=!1,Qe=-1,(s||Qe!==l)&&o.updateCurrItem(),d("mainScrollAnimComplete")}),s&&o.updateCurrItem(!0),s},hn=function(e){return 1/Vt*e*oe},On=function(){var n,a,r,e=u,t=dn(),s=on();return u<t?e=t:u>s&&(e=s),a=1,n=Be,Ve&&!ft&&!Ie&&u<t?(o.close(),!0):(Ve&&(r=function(e){I((a-n)*e+n)}),o.zoomTo(e,0,200,i.easing.cubic.out,r),!0)},Ge,Xe;Ne("Gestures",{publicMethods:{initGestures:function(){var e=function(e,t,n,s,o){$e=e+t,He=e+n,Le=e+s,o?De=e+o:De=""};$=h.pointerEvent,$&&h.touch&&(h.touch=!1),$?navigator.msPointerEnabled?e("MSPointer","Down","Move","Up","Cancel"):e("pointer","down","move","up","cancel"):h.touch?(e("touch","start","move","end","cancel"),R=!0):e("mouse","down","move","up"),Ee=He+" "+Le+" "+De,Ye=$e,$&&!R&&(R=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),o.likelyTouchDevice=R,b[$e]=zn,b[He]=Tn,b[Le]=Mn,De&&(b[De]=b[Le]),h.touch&&(Ye+=" mousedown",Ee+=" mousemove mouseup",b.mousedown=b[$e],b.mousemove=b[He],b.mouseup=b[Le]),R||(a.allowPanToNext=!1)}}});var k,q,G,Z,Xt=function(t,n,s,c){Z&&clearTimeout(Z),ve=!0,Ft=!0,t.initialLayout?(h=t.initialLayout,t.initialLayout=null):h=a.getThumbBoundsFn&&a.getThumbBoundsFn(l);var h,p,m=s?a.hideAnimationDuration:a.showAnimationDuration,f=function(){Se("initialZoom"),s?(o.template.removeAttribute("style"),o.bg.removeAttribute("style")):(I(1),n&&(n.style.display="block"),i.addClass(e,"pswp--animated-in"),d("initialZoom"+(s?"OutEnd":"InEnd"))),c&&c(),ve=!1};if(!m||!h||h.x===void 0){d("initialZoom"+(s?"Out":"In")),u=t.initialZoomLevel,_(r,t.initialPosition),g(),e.style.opacity=s?0:1,I(1),m?setTimeout(function(){f()},m):f();return}p=function(){var c=_t,n=!o.currItem.src||o.currItem.loadError||a.showHideOpacity;t.miniImg&&(t.miniImg.style.webkitBackfaceVisibility="hidden"),s||(u=h.w/t.w,r.x=h.x,r.y=h.y-Nt,o[n?"template":"bg"].style.opacity=.001,g()),kt("initialZoom"),s&&!c&&i.removeClass(e,"pswp--animated-in"),n&&(s?i[(c?"remove":"add")+"Class"](e,"pswp--animate_opacity"):setTimeout(function(){i.addClass(e,"pswp--animate_opacity")},30)),Z=setTimeout(function(){if(d("initialZoom"+(s?"Out":"In")),s){var a=h.w/t.w,o={x:r.x,y:r.y},l=u,p=Be,v=function(t){t===1?(u=a,r.x=h.x,r.y=h.y-se):(u=(a-l)*t+l,r.x=(h.x-o.x)*t+o.x,r.y=(h.y-se-o.y)*t+o.y),g(),n?e.style.opacity=1-t:I(p-t*p)};c?Te("initialZoom",0,1,m,i.easing.cubic.out,v,f):(v(1),Z=setTimeout(f,m+20))}else u=t.initialZoomLevel,_(r,t.initialPosition),g(),I(1),n?e.style.opacity=1:I(1),Z=setTimeout(f,m+20)},s?25:90)},p()},A={},J=[],Ft,ve,bn={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return q.length}},pn,rn=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},fn=function(e,t,n){var s=e.bounds;s.center.x=Math.round((A.x-t)/2),s.center.y=Math.round((A.y-n)/2)+e.vGap.top,s.max.x=t>A.x?Math.round(A.x-t):s.center.x,s.max.y=n>A.y?Math.round(A.y-n)+e.vGap.top:s.center.y,s.min.x=t>A.x?0:s.center.x,s.min.y=n>A.y?e.vGap.top:s.center.y},Me=function(e,t,n){if(e.src&&!e.loadError){var o,i,r,s=!n;if(s&&(e.vGap||(e.vGap={top:0,bottom:0}),d("parseVerticalMargin",e)),A.x=t.x,A.y=t.y-e.vGap.top-e.vGap.bottom,s&&(o=A.x/e.w,i=A.y/e.h,e.fitRatio=o<i?o:i,r=a.scaleMode,r==="orig"?n=1:r==="fit"&&(n=e.fitRatio),n>1&&(n=1),e.initialZoomLevel=n,e.bounds||(e.bounds=rn())),!n)return;return fn(e,e.w*n,e.h*n),s&&n===e.initialZoomLevel&&(e.initialPosition=e.bounds.center),e.bounds}return e.w=e.h=0,e.initialZoomLevel=e.fitRatio=1,e.bounds=rn(),e.initialPosition=e.bounds.center,e.bounds},Ke=function(e,t,n,s,i,a){if(t.loadError)return;s&&(t.imageAppended=!0,ie(t,s,t===o.currItem&&ae),n.appendChild(s),a&&setTimeout(function(){t&&t.loaded&&t.placeholder&&(t.placeholder.style.display="none",t.placeholder=null)},500))},un=function(e){e.loading=!0,e.loaded=!1;var t=e.img=i.createEl("pswp__img","img"),n=function(){e.loading=!1,e.loaded=!0,e.loadComplete?e.loadComplete(e):e.img=null,t.onload=t.onerror=null,t=null};return t.onload=n,t.onerror=function(){e.loadError=!0,n()},t.src=e.src,t},Yt=function(e,t){if(e.src&&e.loadError&&e.container)return t&&(e.container.innerHTML=""),e.container.innerHTML=a.errorMsg.replace("%url%",e.src),!0},ie=function(e,t,n){if(!e.src)return;t||(t=e.container.lastChild);var s=n?e.w:Math.round(e.w*e.fitRatio),o=n?e.h:Math.round(e.h*e.fitRatio);e.placeholder&&!e.loaded&&(e.placeholder.style.width=s+"px",e.placeholder.style.height=o+"px"),t.style.width=s+"px",t.style.height=o+"px"},zt=function(){if(J.length){for(var e,t=0;t<J.length;t++)e=J[t],e.holder.index===e.index&&Ke(e.index,e.item,e.baseDiv,e.img,!1,e.clearPlaceholder);J=[]}};Ne("Controller",{publicMethods:{lazyLoadItem:function(e){e=nt(e);var t=G(e);if(!t||(t.loaded||t.loading)&&!Ue)return;if(d("gettingData",e,t),!t.src)return;un(t)},initController:function(){i.extend(a,bn,!0),o.items=q=n,G=o.getItemAt,k=a.getNumItemsFn,pn=a.loop,k()<3&&(a.loop=!1),m("beforeChange",function(e){var t,n=a.preload,s=e===null||e>=0,i=Math.min(n[0],k()),r=Math.min(n[1],k());for(t=1;t<=(s?r:i);t++)o.lazyLoadItem(l+t);for(t=1;t<=(s?i:r);t++)o.lazyLoadItem(l-t)}),m("initialLayout",function(){o.currItem.initialLayout=a.getThumbBoundsFn&&a.getThumbBoundsFn(l)}),m("mainScrollAnimComplete",zt),m("initialZoomInEnd",zt),m("destroy",function(){for(var e,t=0;t<q.length;t++)e=q[t],e.container&&(e.container=null),e.placeholder&&(e.placeholder=null),e.img&&(e.img=null),e.preloader&&(e.preloader=null),e.loadError&&(e.loaded=e.loadError=!1);J=null})},getItemAt:function(e){return e>=0&&q[e]!==void 0&&q[e]},allowProgressiveImg:function(){return a.forceProgressiveLoading||!R||a.mouseUsed||screen.width>1200},setContent:function(e,t){a.loop&&(t=nt(t));var n,s,r,c,u,m=o.getItemAt(e.index);if(m&&(m.container=null),n=o.getItemAt(t),!n){e.el.innerHTML="";return}d("gettingData",t,n),e.index=t,e.item=n,s=n.container=i.createEl("pswp__zoom-wrap"),!n.src&&n.html&&(n.html.tagName?s.appendChild(n.html):s.innerHTML=n.html),Yt(n),Me(n,v),n.src&&!n.loadError&&!n.loaded?(n.loadComplete=function(n){if(!ge)return;if(e&&e.index===t){if(Yt(n,!0)){n.loadComplete=n.img=null,Me(n,v),Ae(n),e.index===l&&o.updateCurrZoomItem();return}n.imageAppended?!ve&&n.placeholder&&(n.placeholder.style.display="none",n.placeholder=null):h.transform&&(y||ve)?J.push({item:n,baseDiv:s,img:n.img,index:t,holder:e,clearPlaceholder:!0}):Ke(t,n,s,n.img,y||ve,!0)}n.loadComplete=null,n.img=null,d("imageLoadComplete",t,n)},i.features.transform&&(u="pswp__img pswp__img--placeholder",u+=n.msrc?"":" pswp__img--placeholder--blank",c=i.createEl(u,n.msrc?"img":""),n.msrc&&(c.src=n.msrc),ie(n,c),s.appendChild(c),n.placeholder=c),n.loading||un(n),o.allowProgressiveImg()&&(!Ft&&h.transform?J.push({item:n,baseDiv:s,img:n.img,index:t,holder:e}):Ke(t,n,s,n.img,!0,!0))):n.src&&!n.loadError&&(r=i.createEl("pswp__img","img"),r.style.opacity=1,r.src=n.src,ie(n,r),Ke(t,n,s,r,!0)),!Ft&&t===l?(D=s.style,Xt(n,r||n.img)):Ae(n),e.el.innerHTML="",e.el.appendChild(s)},cleanSlide:function(e){e.img&&(e.img.onload=e.img.onerror=null),e.loaded=e.loading=e.img=e.imageAppended=!1}}}),Ge={},Xe=function(e,t,n){var s=document.createEvent("CustomEvent"),o={origEvent:e,target:e.target,releasePoint:t,pointerType:n||"touch"};s.initCustomEvent("pswpTap",!0,!0,o),e.target.dispatchEvent(s)},Ne("Tap",{publicMethods:{initTap:function(){m("firstTouchStart",o.onTapStart),m("touchRelease",o.onTapRelease),m("destroy",function(){Ge={},Y=null})},onTapStart:function(e){e.length>1&&(clearTimeout(Y),Y=null)},onTapRelease:function(e,t){if(!t)return;if(!ce&&!Ct&&!le){var s,n=t;if(Y&&(clearTimeout(Y),Y=null,xn(n,Ge))){d("doubleTap",n);return}if(t.type==="mouse"){Xe(e,t,"mouse");return}if(s=e.target.tagName.toUpperCase(),s==="BUTTON"||i.hasClass(e.target,"pswp__single-tap")){Xe(e,t);return}_(Ge,n),Y=setTimeout(function(){Xe(e,t),Y=null},300)}}}}),Ne("DesktopZoom",{publicMethods:{initDesktopZoom:function(){if(at)return;R?m("mouseUsed",function(){o.setupDesktopZoom()}):o.setupDesktopZoom(!0)},setupDesktopZoom:function(t){E={},n="wheel mousewheel DOMMouseScroll",m("bindEvents",function(){i.bind(e,n,o.handleMouseWheel)}),m("unbindEvents",function(){E&&i.unbind(e,n,o.handleMouseWheel)}),o.mouseZoomedIn=!1;var n,s,a=function(){o.mouseZoomedIn&&(i.removeClass(e,"pswp--zoomed-in"),o.mouseZoomedIn=!1),u<1?i.addClass(e,"pswp--zoom-allowed"):i.removeClass(e,"pswp--zoom-allowed"),r()},r=function(){s&&(i.removeClass(e,"pswp--dragging"),s=!1)};m("resize",a),m("afterChange",a),m("pointerDown",function(){o.mouseZoomedIn&&(s=!0,i.addClass(e,"pswp--dragging"))}),m("pointerUp",r),t||a()},handleMouseWheel:function(e){if(u<=o.currItem.fitRatio)return a.modal&&(!a.closeOnScroll||le||F?e.preventDefault():be&&Math.abs(e.deltaY)>2&&(_t=!0,o.close())),!0;if(e.stopPropagation(),E.x=0,"deltaX"in e)e.deltaMode===1?(E.x=e.deltaX*18,E.y=e.deltaY*18):(E.x=e.deltaX,E.y=e.deltaY);else if("wheelDelta"in e)e.wheelDeltaX&&(E.x=-.16*e.wheelDeltaX),e.wheelDeltaY?E.y=-.16*e.wheelDeltaY:E.y=-.16*e.wheelDelta;else if("detail"in e)E.y=e.detail;else return;Et(u,!0);var t=r.x-E.x,n=r.y-E.y;(a.modal||t<=c.min.x&&t>=c.max.x&&n<=c.min.y&&n>=c.max.y)&&e.preventDefault(),o.panTo(t,n)},toggleDesktopZoom:function(t){t=t||{x:v.x/2+de.x,y:v.y/2+de.y};var s=a.getDoubleTapZoom(!0,o.currItem),n=u===s;o.mouseZoomedIn=!n,o.zoomTo(n?o.currItem.initialZoomLevel:s,t,333),i[(n?"remove":"add")+"Class"](e,"pswp--zoomed-in")}}});var p,T,jn={history:!0,galleryUID:1},Ot,Gt,Oe,et,wt,qt,pe,bt,pt,lt,ct=function(){return T.hash.substring(1)},It=function(){Ot&&clearTimeout(Ot),Oe&&clearTimeout(Oe)},Lt=function(){var t,n,s,i,o=ct(),e={};if(o.length<5)return e;n=o.split("&");for(t=0;t<n.length;t++){if(!n[t])continue;if(s=n[t].split("="),s.length<2)continue;e[s[0]]=s[1]}if(a.galleryPIDs){{i=e.pid,e.pid=0;for(t=0;t<q.length;t++)if(q[t].pid===i){e.pid=t;break}}}else e.pid=parseInt(e.pid,10)-1;return e.pid<0&&(e.pid=0),e},rt=function(){if(Oe&&clearTimeout(Oe),le||F){Oe=setTimeout(rt,500);return}et?clearTimeout(Gt):et=!0;var e,t,n=l+1,s=G(l);s.hasOwnProperty("pid")&&(n=s.pid),e=p+"&gid="+a.galleryUID+"&pid="+n,pe||T.hash.indexOf(e)===-1&&(pt=!0),t=T.href.split("#")[0]+"#"+e,lt?"#"+e!==window.location.hash&&history[pe?"replaceState":"pushState"]("",document.title,t):pe?T.replace(t):T.hash=e,pe=!0,Gt=setTimeout(function(){et=!1},60)};Ne("History",{publicMethods:{initHistory:function(){if(i.extend(a,jn,!0),!a.history)return;T=window.location,pt=!1,bt=!1,pe=!1,p=ct(),lt="pushState"in history,p.indexOf("gid=")>-1&&(p=p.split("&gid=")[0],p=p.split("?gid=")[0]),m("afterChange",o.updateURL),m("unbindEvents",function(){i.unbind(window,"hashchange",o.onHashChange)});var e,t=function(){qt=!0,bt||(pt?history.back():p?T.hash=p:lt?history.pushState("",document.title,T.pathname+T.search):T.hash=""),It()};m("unbindEvents",function(){_t&&t()}),m("destroy",function(){qt||t()}),m("firstUpdate",function(){l=Lt().pid}),e=p.indexOf("pid="),e>-1&&(p=p.substring(0,e),p.slice(-1)==="&"&&(p=p.slice(0,-1))),setTimeout(function(){ge&&i.bind(window,"hashchange",o.onHashChange)},40)},onHashChange:function(){if(ct()===p){bt=!0,o.close();return}et||(wt=!0,o.goTo(Lt().pid),wt=!1)},updateURL:function(){if(It(),wt)return;pe?Ot=setTimeout(rt,800):rt()}}}),i.extend(o,yn)};return e})